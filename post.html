<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<script src="https://cdn.tailwindcss.com"></script>
		<script
			src="https://cdn.jsdelivr.net/npm/jdenticon@3.2.0/dist/jdenticon.min.js"
			async
			integrity="sha384-yBhgDqxM50qJV5JPdayci8wCfooqvhFYbIKhv0hTtLvfeeyJMJCscRfFNKIxt43M"
			crossorigin="anonymous"
		></script>
		<title>Post</title>

		<script>
			var nbPages = 1;

			function sendAjaxJSON(url, cFunction, donnees) {
				// url : url du fichier php
				// cFunction : nom de la fct qui utilise les données renvoyées
				// donnees : json des données à envoyer
				const xhttp = new XMLHttpRequest();
				xhttp.onload = function () {
					cFunction(this);
				};
				xhttp.open("POST", url);
				xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
				xhttp.send("json=" + encodeURIComponent(JSON.stringify(donnees)));
			}

			// ------------------------------------------ Check Session ------------------------------------------
			function usingCheckSession(xhttp) {
				console.log(xhttp.responseText);
				const dataRetrieved = JSON.parse(xhttp.responseText);
				console.log(dataRetrieved);
			}

			var jsonCheckSession = {
				action: "post",
				titre: "",
				description: "",
				categories: [],
			};

			//window.onload = function () {
			//	sendAjaxJSON("PHP/discussion.php", usingCheckSession, jsonCheckSession);
			//};

			function submit() {
				var titre = document.getElementById("titre").value;
				var description = document.getElementById("description").value;
				var categories = [];
				if (document.getElementById("question").checked) {
					categories.push("question");
				}
				if (document.getElementById("temoignage").checked) {
					categories.push("temoignage");
				}
				if (document.getElementById("information").checked) {
					categories.push("information");
				}
				if (document.getElementById("humour").checked) {
					categories.push("humour");
				}

				jsonCheckSession.titre = titre;
				jsonCheckSession.description = description;
				jsonCheckSession.categories = categories;

				sendAjaxJSON("PHP/creation_discussion.php", usingCheckSession, jsonCheckSession);
			}
		</script>
	</head>
	<body class="p-0 m-0 h-screen">
		<!-- NAVBAR -->
		<nav class="flex p-2 items-center justify-between">
			<img src="static/logo.svg" class="h-16" alt="" />
			<svg
				class="h-16"
				xmlns="http://www.w3.org/2000/svg"
				viewBox="0 0 24 24"
				fill="currentColor"
				class="w-6 h-6"
			>
				<path
					fill-rule="evenodd"
					d="M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z"
					clip-rule="evenodd"
				/>
			</svg>
		</nav>
		<!-- End of the navbar -->

		<!-- Main -->
		<div class="mt-10 p-2 border-2 border-red-300 h-2/3 overflow-scroll">
			<!--main post-->
			<div class="mb-4">
				<div class="flex gap-2">
					<svg class="w-16" data-jdenticon-value="john"></svg>
					<div class="flex flex-col">
						<span class="text-pink-800 text-2xl font-bold">john</span>
						<span class="text-gray-400">2022-12-02 03:07:21</span>
					</div>
				</div>
				<div class="pl-4">
					<p class="text-pink-600 text-xl font-bold">Lorem, ipsum dolor si amet</p>
					<p class="text-gray-800">
						Lorem ipsum dolor sit amet consectetur adipisicing elit. Nesciunt exercitationem repudiandae
						laboriosam iste expedita debitis quae velit, molestias earum perferendis quasi, voluptate quo
						magnam fugit ratione, quos aut iure natus.
					</p>
				</div>
			</div>
			<!--end of main post-->

			<!--comments-->
			<div class="ml-5 mb-2">
				<div class="flex gap-2">
					<svg class="w-10" data-jdenticon-value="susan"></svg>
					<div class="flex flex-col">
						<span class="text-pink-800 text-xl font-semibold">susan</span>
						<span class="text-gray-400 text-sm">2022-12-02 03:31:16</span>
					</div>
				</div>
				<div class="pl-2">
					<p class="text-gray-800">
						Lorem ipsum dolor, sit amet consectetur adipisicing elit. Optio fugit alias, neque sapiente
						nobis doloribus.
					</p>
				</div>
			</div>
			<!--end of comments-->
			<!--comments-->
			<div class="ml-5 mb-2">
				<div class="flex gap-2">
					<svg class="w-10" data-jdenticon-value="sylvain"></svg>
					<div class="flex flex-col">
						<span class="text-pink-800 text-xl font-semibold">sylvain</span>
						<span class="text-gray-400 text-sm">2022-12-02 03:31:16</span>
					</div>
				</div>
				<div class="pl-2">
					<p class="text-gray-800">
						Lorem ipsum dolor, sit amet consectetur adipisicing elit. Optio fugit alias, neque sapiente
						nobis doloribus.
					</p>
				</div>
			</div>
			<!--end of comments-->
			<!--comments-->
			<div class="ml-5 mb-2">
				<div class="flex gap-2">
					<svg class="w-10" data-jdenticon-value="damien"></svg>
					<div class="flex flex-col">
						<span class="text-pink-800 text-xl font-semibold">damien</span>
						<span class="text-gray-400 text-sm">2022-12-02 03:31:16</span>
					</div>
				</div>
				<div class="pl-2">
					<p class="text-gray-800">
						Lorem ipsum dolor, sit amet consectetur adipisicing elit. Optio fugit alias, neque sapiente
						nobis doloribus.
					</p>
				</div>
			</div>
			<!--end of comments-->
			<!--comments-->
			<div class="ml-5 mb-2">
				<div class="flex gap-2">
					<svg class="w-10" data-jdenticon-value="kilyan"></svg>
					<div class="flex flex-col">
						<span class="text-pink-800 text-xl font-semibold">kilyan</span>
						<span class="text-gray-400 text-sm">2022-12-02 03:31:16</span>
					</div>
				</div>
				<div class="pl-2">
					<p class="text-gray-800">
						Lorem ipsum dolor, sit amet consectetur adipisicing elit. Optio fugit alias, neque sapiente
						nobis doloribus.
					</p>
				</div>
			</div>
			<!--end of comments-->
		</div>

		<div class="flex flex-col gap-2 items-center justify-center mt-3">
			<input
				class="w-5/6 bg-gray-200 border-2 border-gray-400 text-gray-500 rounded-md p-3"
				type="text"
				placeholder="Repondez à la conversation"
			/>
			<div
				onclick="reload()"
				class="w-5/6 text-white bg-pink-500 p-2 flex items-center justify-center gap-2 rounded-md hover:bg-pink-800 transition-all duration-200 hover:cursor-pointer border-transparent"
			>
				<p>Poster</p>
			</div>
		</div>
	</body>
</html>
